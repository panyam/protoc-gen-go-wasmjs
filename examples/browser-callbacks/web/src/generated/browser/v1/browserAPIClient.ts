// Code generated by protoc-gen-go-wasmjs. DO NOT EDIT.
// source: browser/v1/browser.proto

import { WASMBundle, WASMBundleConfig, ServiceClient } from '@protoc-gen-go-wasmjs/runtime';

// Import TypeScript types for method signatures
import {
    FetchRequest,
    StorageSetRequest,
    CookieRequest,
    CookieResponse,
    AlertResponse,
    PromptRequest,
    LogRequest,
    LogResponse,
    FetchResponse,
    StorageKeyRequest,
    StorageValueResponse,
    StorageSetResponse,
    AlertRequest,
    PromptResponse,
} from './interfaces';
/**
 * BrowserAPI service client interface
 * Fully typed method signatures with TypeScript interfaces
 */
export interface BrowserAPIMethods {
	fetch(request: FetchRequest): Promise<FetchResponse>;
	getLocalStorage(request: StorageKeyRequest): Promise<StorageValueResponse>;
	setLocalStorage(request: StorageSetRequest): Promise<StorageSetResponse>;
	getCookie(request: CookieRequest): Promise<CookieResponse>;
	alert(request: AlertRequest): Promise<AlertResponse>;
	promptUser(request: PromptRequest): Promise<PromptResponse>;
	logToWindow(request: LogRequest): Promise<LogResponse>;
}

/**
 * browser_callbacks WASM bundle - manages shared WASM module
 * One bundle per WASM file, shared by multiple service clients
 */
export class Browser_callbacksBundle {
    private wasmBundle: WASMBundle;

    // Service clients that share this bundle
    public readonly browserAPI: BrowserAPIServiceClient;

    constructor() {
        const config: WASMBundleConfig = {
            moduleName: 'browser_callbacks',
            apiStructure: 'namespaced',
            jsNamespace: 'browserCallbacks'
        };

        this.wasmBundle = new WASMBundle(config);

        // Initialize service clients with shared bundle
        this.browserAPI = new BrowserAPIServiceClient(this.wasmBundle);
    }

    /**
     * Register a browser service implementation
     */
    public registerBrowserService(name: string, implementation: any): void {
        this.wasmBundle.registerBrowserService(name, implementation);
    }

    /**
     * Load the WASM module asynchronously (singleton pattern)
     */
    public async loadWasm(wasmPath: string): Promise<void> {
        return this.wasmBundle.loadWasm(wasmPath);
    }

    /**
     * Check if WASM bundle is ready for operations
     */
    public isReady(): boolean {
        return this.wasmBundle.isReady();
    }

    /**
     * Wait for WASM bundle to be ready
     */
    public async waitUntilReady(): Promise<void> {
        return this.wasmBundle.waitUntilReady();
    }
}
/**
 * BrowserAPI service client implementation
 * Lightweight facade that uses shared WASM bundle
 */
export class BrowserAPIServiceClient extends ServiceClient implements BrowserAPIMethods {
    async fetch(request: FetchRequest): Promise<FetchResponse> {
        return this.callMethod('browserAPI.fetch', request);
    }
    async getLocalStorage(request: StorageKeyRequest): Promise<StorageValueResponse> {
        return this.callMethod('browserAPI.getLocalStorage', request);
    }
    async setLocalStorage(request: StorageSetRequest): Promise<StorageSetResponse> {
        return this.callMethod('browserAPI.setLocalStorage', request);
    }
    async getCookie(request: CookieRequest): Promise<CookieResponse> {
        return this.callMethod('browserAPI.getCookie', request);
    }
    async alert(request: AlertRequest): Promise<AlertResponse> {
        return this.callMethod('browserAPI.alert', request);
    }
    async promptUser(request: PromptRequest): Promise<PromptResponse> {
        return this.callMethod('browserAPI.promptUser', request);
    }
    async logToWindow(request: LogRequest): Promise<LogResponse> {
        return this.callMethod('browserAPI.logToWindow', request);
    }
}

// Export the main bundle class as default
export default Browser_callbacksBundle;
